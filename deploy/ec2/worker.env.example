HOME=/root
OPENSANDBOX_MODE=worker
OPENSANDBOX_PORT=8080
OPENSANDBOX_REGION=use2
OPENSANDBOX_DATA_DIR=/data/sandboxes
OPENSANDBOX_WORKER_ID=w-use2-1

# Set to the public IP/hostname of this instance
OPENSANDBOX_HTTP_ADDR=http://<WORKER_PUBLIC_IP>:8080
OPENSANDBOX_GRPC_ADVERTISE=<WORKER_PUBLIC_IP>:9090

# Domain for sandbox routing (wildcard DNS must point to this instance)
OPENSANDBOX_SANDBOX_DOMAIN=workers.opensandbox.ai

# --- Secrets Manager (recommended) ---
# Store all secrets in a single Secrets Manager secret as a JSON object.
# The worker fetches them at startup using the EC2 instance's IAM role.
# Keys in the secret should match env var names (e.g. OPENSANDBOX_JWT_SECRET).
# Any env vars set here take precedence over values from Secrets Manager.
#
# OPENSANDBOX_SECRETS_ARN=arn:aws:secretsmanager:us-east-2:123456789012:secret:opensandbox/worker-AbCdEf
#
# If using Secrets Manager, you do NOT need to set the secrets below.
# The JSON secret should contain:
#   {
#     "OPENSANDBOX_JWT_SECRET": "...",
#     "OPENSANDBOX_REDIS_URL": "redis://...",
#     "OPENSANDBOX_S3_ACCESS_KEY_ID": "...",
#     "OPENSANDBOX_S3_SECRET_ACCESS_KEY": "...",
#     "OPENSANDBOX_S3_BUCKET": "opensandbox-checkpoints",
#     "OPENSANDBOX_S3_REGION": "us-east-2",
#     "DATABASE_URL": "postgres://..."
#   }

# --- OR: inline secrets (for manual deployments without IAM roles) ---
# OPENSANDBOX_JWT_SECRET=<JWT_SECRET>
# OPENSANDBOX_REDIS_URL=redis://default:<REDIS_PASSWORD>@127.0.0.1:6379
# OPENSANDBOX_S3_ACCESS_KEY_ID=<AWS_ACCESS_KEY_ID>
# OPENSANDBOX_S3_SECRET_ACCESS_KEY=<AWS_SECRET_ACCESS_KEY>
# OPENSANDBOX_S3_BUCKET=opensandbox-checkpoints
# OPENSANDBOX_S3_REGION=us-east-2
# DATABASE_URL=postgres://<DB_USER>:<DB_PASSWORD>@<DB_HOST>:5432/opensandbox?sslmode=disable

# --- Sandbox resource defaults ---
# Adjust per instance type for benchmarking:
#
# c7gd.metal (64 vCPU, 128GB RAM, 3.8TB NVMe):
#   OPENSANDBOX_MAX_CAPACITY=32
#   OPENSANDBOX_DEFAULT_SANDBOX_MEMORY_MB=4096
#   OPENSANDBOX_DEFAULT_SANDBOX_CPUS=2
#
# r6gd.metal / r7gd.metal (64 vCPU, 512GB RAM, 3.8TB NVMe):
#   OPENSANDBOX_MAX_CAPACITY=32
#   OPENSANDBOX_DEFAULT_SANDBOX_MEMORY_MB=16384
#   OPENSANDBOX_DEFAULT_SANDBOX_CPUS=2
#   (or: MAX_CAPACITY=64, MEMORY_MB=8192, CPUS=1 for higher density)

OPENSANDBOX_MAX_CAPACITY=32
OPENSANDBOX_DEFAULT_SANDBOX_MEMORY_MB=4096
OPENSANDBOX_DEFAULT_SANDBOX_CPUS=2
OPENSANDBOX_DEFAULT_SANDBOX_DISK_MB=51200
