HOME=/root
OPENCOMPUTER_MODE=worker
OPENCOMPUTER_PORT=8080
OPENCOMPUTER_REGION=use2
OPENCOMPUTER_DATA_DIR=/data/sandboxes
OPENCOMPUTER_WORKER_ID=w-use2-1

# Set to the public IP/hostname of this instance
OPENCOMPUTER_HTTP_ADDR=http://<WORKER_PUBLIC_IP>:8080
OPENCOMPUTER_GRPC_ADVERTISE=<WORKER_PUBLIC_IP>:9090

# Domain for sandbox routing (wildcard DNS must point to this instance)
OPENCOMPUTER_SANDBOX_DOMAIN=workers.opencomputer.dev

# --- Secrets Manager (recommended) ---
# Store all secrets in a single Secrets Manager secret as a JSON object.
# The worker fetches them at startup using the EC2 instance's IAM role.
# Keys in the secret should match env var names (e.g. OPENCOMPUTER_JWT_SECRET).
# Any env vars set here take precedence over values from Secrets Manager.
#
# OPENCOMPUTER_SECRETS_ARN=arn:aws:secretsmanager:us-east-2:123456789012:secret:opencomputer/worker-AbCdEf
#
# If using Secrets Manager, you do NOT need to set the secrets below.
# The JSON secret should contain:
#   {
#     "OPENCOMPUTER_JWT_SECRET": "...",
#     "OPENCOMPUTER_REDIS_URL": "redis://...",
#     "OPENCOMPUTER_S3_ACCESS_KEY_ID": "...",
#     "OPENCOMPUTER_S3_SECRET_ACCESS_KEY": "...",
#     "OPENCOMPUTER_S3_BUCKET": "opencomputer-checkpoints",
#     "OPENCOMPUTER_S3_REGION": "us-east-2",
#     "DATABASE_URL": "postgres://..."
#   }

# --- OR: inline secrets (for manual deployments without IAM roles) ---
# OPENCOMPUTER_JWT_SECRET=<JWT_SECRET>
# OPENCOMPUTER_REDIS_URL=redis://default:<REDIS_PASSWORD>@127.0.0.1:6379
# OPENCOMPUTER_S3_ACCESS_KEY_ID=<AWS_ACCESS_KEY_ID>
# OPENCOMPUTER_S3_SECRET_ACCESS_KEY=<AWS_SECRET_ACCESS_KEY>
# OPENCOMPUTER_S3_BUCKET=opencomputer-checkpoints
# OPENCOMPUTER_S3_REGION=us-east-2
# DATABASE_URL=postgres://<DB_USER>:<DB_PASSWORD>@<DB_HOST>:5432/opencomputer?sslmode=disable

# --- Sandbox resource defaults ---
# Adjust per instance type for benchmarking:
#
# c7gd.metal (64 vCPU, 128GB RAM, 3.8TB NVMe):
#   OPENCOMPUTER_MAX_CAPACITY=32
#   OPENCOMPUTER_DEFAULT_SANDBOX_MEMORY_MB=4096
#   OPENCOMPUTER_DEFAULT_SANDBOX_CPUS=2
#
# r6gd.metal / r7gd.metal (64 vCPU, 512GB RAM, 3.8TB NVMe):
#   OPENCOMPUTER_MAX_CAPACITY=32
#   OPENCOMPUTER_DEFAULT_SANDBOX_MEMORY_MB=16384
#   OPENCOMPUTER_DEFAULT_SANDBOX_CPUS=2
#   (or: MAX_CAPACITY=64, MEMORY_MB=8192, CPUS=1 for higher density)

OPENCOMPUTER_MAX_CAPACITY=32
OPENCOMPUTER_DEFAULT_SANDBOX_MEMORY_MB=4096
OPENCOMPUTER_DEFAULT_SANDBOX_CPUS=2
OPENCOMPUTER_DEFAULT_SANDBOX_DISK_MB=51200
